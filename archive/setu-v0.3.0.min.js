!function(u,o){function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"object"==typeof e&&!i(e)}function r(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}function t(){}function n(e){for(e in _i[e]&&($i=_i[e]),_i)_i[e]<=$i?console[e]=console[e]||t:console[e]=t;console.group=c("group","info"),console.groupEnd=c("groupEnd","info"),Ti=c("time","error"),Ai=c("timeEnd","error"),console.time=c("time","error"),console.timeEnd=c("timeEnd","error"),Si=console.info,Ni=console.warn,gi=console.error}function c(e,n){return console[e]&&t!==console[n]?console[e]:t}function e(e){return new Date(e).toISOString()}function f(e,n,t,r,o){(t=t||{}).method=e||Fr,t.cache=t.cache||!1,t.beforeSend=t.beforeSend||function(e,n){y(u.ADAPTER_AJAX_BEFORE_SEND,e,n,this)},s(t,n,e,r),l(t,n,e,o),$_.ajax(n,t)}function s(e,n,t,o){e.success=function(e,n,t,r){try{y(u.ADAPTER_AJAX_ON_RESPONSE,e,n,t,r)}catch(e){}"function"==typeof o&&o({data:e,status:n,xhr:r,url:t})}}function l(e,n,o,i){e.error=function(e,n,t,r){gi("Setu.http ajax !",t,o,n,e);try{y(u.ADAPTER_AJAX_ON_RESPONSE,e,n,t,r)}catch(e){}"function"==typeof i&&i(Error(JSON.stringify({status:n,error:e,url:t})))}}function E(e,n,t,r){return f(Fr,e,n,t,r)}function d(e,n,t,r){return f(Br,e,n,t,r)}function p(e,n,t,r){return f(Jr,e,n,t,r)}function h(e,n,t,r){return f(Xr,e,n,t,r)}function m(e,n,t,r){return f(Qr,e,n,t,r)}function v(e,n,t){bi[e]=bi[e]||[],bi[e].push([t,n])}function y(e){if(!bi[e])return[];var n=Array.prototype.slice.apply(arguments),t=[];return bi[e].forEach(function(e){n[0]=e[0],t.push(e[1].apply(null,n))}),t}function _(e,n,t){-1===ki[e].indexOf(t)&&(ki[e].push(t),ki[e].push(n))}function $(e,n,t,r){Ri[e][n]=Ri[e][n]||[],-1===Ri[e][n].indexOf(r)&&(Ri[e][n].push(r),Ri[e][n].push(t))}function T(n,t,r){for(var e=ki[n].slice(),o=0;o<e.length;o+=2)try{e[o+1](e[o],t,r)}catch(e){Ni("Setu.events !",n,t,r,e.message,e.stack)}}function A(n,t,r,o){var e=Ri[n][t];if(e){e=e.slice();for(var i=0;i<e.length;i+=2)try{e[i+1](e[i],r,o)}catch(e){Ni("Setu.events !",n,t,r,o,e.message,e.stack)}}}function S(e,n){ki[e].remove(n,2)}function N(e,n,t){var r=Ri[e][n];r&&r.remove(t,2)}function g(){for(var e in Oi)Oi.hasOwnProperty(e)&&delete Ci[e];Oi={},Li=o}function w(e,n){Ci[e]=n,Oi[e]=!0,"event"===e&&(Li=n)}function b(e){return Ci[e]}function k(e){for(var n in e){if(e.hasOwnProperty(n))w(n,e[n])}}function R(e,n){L(e),k(e);var t=n.replace(wo,function(n){var e=n.replace(/[{}]/g,"").replace(/\s*\|\s*/,"|").trim();parts=e.split("|");try{var t=C(parts);return o!==t?t:n}catch(e){return n}});return D(Object.keys(e)),t}function C(e){var n=eval(e[0]);if(o===n)return o;for(var t=1;t<e.length;++t){var r=e[t];if(!(r in wi))return o;if(n=wi[r](n),o===n)return o}return n}function O(e,n){var t;L(e),k(e);try{t=n.match(wo)?eval(R({},n)):eval(n)}catch(e){t=n}return D(Object.keys(e)),t}function L(e){!e.event&&Li&&Ci.event!==Li&&(Ci.event=Li)}function D(e){e.forEach(function(e){Ci[e]&&(Ci[e]=o),delete Oi[e],"event"===e&&(Li=o)})}function V(e){(Di=e).logLevel&&n(Di.logLevel),Di.adapters&&Di.adapters.forEach(function(e){u.adapters[e].forEach(function(e){v(e.purpose,e.handler)})})}function P(){return Di.pathchange&&Di.pathchange.flush?Di.pathchange.flush:o}function I(e,n,t){Ii=t||{trailingSlash:!0,nameResolution:"Setu.models.NameResolutionDefault",urlPrefix:"",compositePkToUrl:u.MULTI_PK_TO_URL_KEY_VALUE_PATH,compositePkSeparator:"_",validateInstances:!0},Pi=n||{},Ui=eval(Ii.nameResolution),j(e)}function U(e){if(!Vi[e])throw gi("Setu.models ! model",e,"not defined by application"),new TypeError(Ei);return Vi[e]}function j(e){for(var n in e)if(e.hasOwnProperty(n)){var t=M(e,n),r=ee(n,t);Vi[n]=oe(t,n,r)}}function M(e,n){var t=x(e,n);for(var r in z(n,t),t)t.hasOwnProperty(r)&&H(e,n,t,r);return t}function x(e,n){var t=e[n];if(!a(t))throw gi("Setu.models !",n,"model definition must be an object",t),new TypeError(Ei);return t}function z(n,t){Yr.forEach(function(e){if(e in t)throw gi("Setu.models !",e,"is used as a field in model",n,"but it is reserved"),new TypeError(Ei)})}function H(e,n,t,r){var o=q(n,t,r);switch(K(n,r,o)){case No:Z(n,r,o,vo);break;case So:G(n,r,o);break;case Ao:F(e,n,r,o);break;case To:B(e,n,r,o)}}function q(e,n,t){var r=n[t];if(!a(r))throw gi("Setu.models !",e,"model field",t,"definition is not an object",r),new TypeError(Ei);return r}function K(e,n,t){return J(e,n,t),io in t?To!==t.type?oo in t?So:No:To:Ao}function Z(e,n,t,r){Q(e,n,t,mo),Y(e,n,t,r)}function G(e,n,t){Z(e,n,t,yo)}function F(e,n,t,r){X(e,n,t,r),Y(n,t,r,ho)}function B(e,n,t,r){switch(Y(n,t,r,_o),W(n,t,r.elements)){case No:Z(n,t,r.elements,$o);break;case Ao:F(e,n,t,r.elements)}}function J(e,n,t){if(io in t&&eo in t)throw gi("Setu.models !",'both "type" and "fk" are defined in',t,"in model",e,"field",n),new TypeError(Ei);if(!(io in t||eo in t))throw gi("Setu.models !",'none of "type" and "fk" are defined in',t,"in model",e,"field",n),new TypeError(Ei)}function X(e,n,t,r){if(!(r.fk in e))throw gi("Setu.models !","model",r.fk,"referred to in",r,"as a foreign key field",t,"in model",n,"does not exist"),new TypeError(Ei)}function Q(e,n,t,r){if(!r.contains(t.type))throw gi("Setu.models !","unsupported type",t.type,"in",t,"in model",e,"field",n,"allowed ones are:",r),new TypeError(Ei)}function Y(e,n,t,r){for(var o in t)if(t.hasOwnProperty(o)&&!r.contains(o))throw gi("Setu.models !","unsupported parameter",o,"in",t,"in model",e,"field",n,"allowed ones are:",r),new TypeError(Ei)}function W(e,n,t){return J(e,n,t),t.type?No:Ao}function ee(e,n){var t=[];for(var r in n)n.hasOwnProperty(r)&&n[r].pk&&t.push(r);if(!t.length)throw gi("Setu.models !","model",e,"does not have any primary keys defined"),new TypeError(Ei);return t}function ne(e){var n={};for(var t in e.def)e.def.hasOwnProperty(t)&&(n[t]={get:te(t),set:re(t),enumerable:!0});return n}function te(e){return function(){return ji[this.$$ctrs[e]]}}function re(r){return function(e){var n=this.$$ctrs[r],t=ji[n];if(t!==(ji[n]=e)){if(!this.$$c||this.$$ignChange)return;De(this,r,t,e)}}}function oe(e,n,t){var r={};return r.name=n,r.pathPrefix=Ii.urlPrefix+"/"+Ui.m2p(r.name),r.def=e,r.instanceType=ne(r),r.primaryKeys=t,r}function ie(e){var n=Object.create(Object.prototype,e.instanceType);for(var t in n.$$ctrs={},e.def){n.$$ctrs[t]=Mi;var r="array"!==e.def[t].type?o:[];ji[Mi]=r,++Mi}return n.$$m=e,n.$$p={},n}function ae(e){var n=e.$$m;for(var t in n.def){var r=e.$$ctrs[t];r in ji&&delete ji[r]}}function ue(e,n){var t=Pi[e.$$m.name];return t&&"function"==typeof t[n]?t[n](e):o}function ce(n,e,t,r){E(fe(n,e=e||""),{format:"json"},function(e){se(n,e,t)},function(e){"function"==typeof r&&r([])})}function fe(e,n){return e.pathPrefix+(n||Ii.trailingSlash?"/":"")+(n?"?"+n:"")}function se(t,e,n){var r=y(u.ADAPTER_MODELS_LIST,e)[0],o=[];r.list.forEach(function(e){var n=ie(t);ve(n,e),o.push(n)}),n(o)}function le(n,e,t,r,o,i){E(Ee(n,e,t,r),{format:"json"},function(e){me(n,e,o)},function(e){"function"==typeof i&&i({})})}function Ee(e,n,t,r){return e.pathPrefix+"/"+de(n,t)+(Ii.trailingSlash?"/":"")+(r?"?"+r:"")}function de(e,n){return Io===n?e:pe(e)}function pe(e){switch(Ii.compositePkToUrl){case u.MULTI_PK_TO_URL_KEY_VALUE_PATH:return e.replace(/,/,"/");case u.MULTI_PK_TO_URL_ORDERED_VALUES_PATH:return he(e,"/");case u.MULTI_PK_TO_URL_ORDERED_SEPERATED_VALUES:return he(e,Ii.compositePkSeparator||"_")}}function he(e,n){var t=e.split(","),r=[];return t.forEach(function(e){r.push(e.replace(/^[^=]+=/,""))}),r.join(n)}function me(e,n,t){var r=n.data,o=ie(e);ve(o,r),t(o)}function ve(e,n){if(n){var t=e.$$m.def,r=e.$$m.name;ye(r,t,n,e.$$c),$e(r,t,n,e),e.$$c=!0,e.$$k=r+":"+Le(e),On(e)}}function ye(e,n,t,r){for(var o in n)if(_e(n[o],r)&&!(o in t))throw gi("Setu.instances ! instance data",t,"for model",e,"does not have required field",o),new TypeError(di)}function _e(e,n){return e.pk&&!n&&!e.auto||e.fk||!e.optional}function $e(e,n,t,r){for(var o in t)o in n&&(Te(e,o,n[o],t),r[o]=t[o])}function Te(e,n,t,r){switch(K(e,n,t)){case No:Ae(e,n,t,r);break;case So:Se(e,n,t,r);break;case Ao:Ne(e,n,t,r);break;case To:we(e,n,t,r)}}function Ae(e,n,t,r){var o=t.type,i=r[n];if(Ce(i,t))throw gi("Setu.instances !",e,"model field",n,"is null in",r,"which is not allowed"),new TypeError(di);if(null!==i&&!Oe(i,o))throw gi("Setu.instances !",e,"model field",n,"is",i,"in",r,"which is not of required type:",o),new TypeError(di)}function Se(e,n,t,r){Ae(e,n,t,r)}function Ne(e,n,t,r){var o=U(t.fk);if(a(r[n])){$e(o.modelName,o.def,r[n],{})}else{var i=o.primaryKeys[0];ge(o.modelName,i,o.def[i],e,n,t,r)}}function ge(e,n,t,r,o,i,a){var u=t.type,c=a[o];if(Ce(c,i))throw gi("Setu.instances !",r,"model field",o,"is a foreign key to",e,"and is null in",a,"which is not allowed"),new TypeError(di);if(null!==c&&!Oe(c,u))throw gi("Setu.instances !",r,"model field",o,"is a foreign key to",e,"whose primary key",n,"is of type",u,"but the value is",c,"in",a),new TypeError(di)}function we(e,n,t,r){if(!i(r[n]))throw gi("Setu.instances !",e,"model field",n,"must be an array but the value is",r[n],"in",r),new TypeError(di);switch(W(e,n,t.elements)){case No:be(e,n,t.elements,r);break;case Ao:ke(e,n,t.elements,r)}}function be(n,t,r,o){var i=r.type;o[t].forEach(function(e){if(Ce(e,r))gi("Setu.instances !",n,"model array field",t,"contains a null element in",o,"which is not allowed");else if(null!==e&&!Oe(e,i))throw gi("Setu.instances !",n,"model array field",t,"has",e,"in",o,"which is not of required type:",i),new TypeError(di)})}function ke(r,e,o,i){i[e].forEach(function(e){var n=U(o.fk);if(a(e)){$e(n.modelName,n.def,e,{})}else{var t=n.primaryKeys[0];Re(n.modelName,t,n.def[t],r,e,o,i)}})}function Re(e,n,t,r,o,i,a){var u=t.type;if(Ce(o,i))throw gi("Setu.instances !",r,"model field",field,"contains foreign keys to",e,"and cannot have nulls","but nulls are there in",a),new TypeError(di);if(null!==o&&!Oe(o,u))throw gi("Setu.instances !",r,"model field",field,"contains foreign keys to",e,"whose primary key",n,"is of type",u,"but value of an array element",o,"in",a,"does not match the type"),new TypeError(di)}function Ce(e,n){return null===e&&!n.null}function Oe(e,n){switch(n){case ao:case lo:return n===typeof e;case so:return"number"==typeof e&&!e.toString().match(/\./);case fo:return"number"==typeof e;case co:return"string"==typeof e&&e.match(Do);case uo:return"string"==typeof e&&e.match(Vo);case Eo:return"string"==typeof e&&e.match(Po);case po:return"string"==typeof e&&e.match(Lo)}return!1}function Le(n){if(1===n.$$m.primaryKeys.length)return n[n.$$m.primaryKeys[0]];var t=[];return n.$$m.primaryKeys.forEach(function(e){t.push(e+"="+n[e])}),t.join(",")}function De(e,n,t,r){e.$$p[n]=!0,A(u.EVENT_INSTANCE_CHANGE,e.$$k,e,{field:n,oldVal:t,newVal:r})}function Ve(e,n,t){return e.$$c?Me(e,n,t):Pe(e,n,t)}function Pe(n,t,r){Ie(n,t)||d(Ue(n),{data:je(n),contentType:Kr,format:"json"},function(e){ve(n,e.data),A(u.EVENT_INSTANCE_CREATE,n.$$m.name,n),t(n)},function(e){"function"==typeof r&&r({})})}function Ie(e,n){return!!e.$$c&&(gi("Setu.instances","internal programming error or user-forced recreation of an already created instance",e),n(e),!0)}function Ue(e){var n=e.$$m.pathPrefix+(Ii.trailingSlash?"/":"");return e.$$qp&&(n+="?"+e.$$qp,delete e.$$qp),n}function je(e){var n={};for(var t in e.$$m.def)e.$$m.def.hasOwnProperty(t)&&!e.$$m.def[t].auto&&(n[t]=e[t]);return n}function Me(n,t,r){if(!xe(n,t)){var e=Ke(n);e&&p(ze(n),{data:e,contentType:Kr,format:"json"},function(e){Ze(n,e),t(n)},function(e){"function"==typeof r&&r({})})}}function xe(e,n){return!e.$$c&&(gi("Setu.instances","internal programming error or user forced update of an instance that does not exist in backend",e),n(e),!0)}function ze(e){var n=e.$$m,t=1===n.primaryKeys.length?Io:Uo,r=Ee(n,He(n,t,e),t,e.$$qp);return e.$$qp&&delete e.$$qp,r}function He(e,n,t){return Io===n?t[e.primaryKeys[0]]:qe(e.primaryKeys,t)}function qe(e,n){var t=[];return e.forEach(function(e){t.push(e+"="+n[e])}),t.join(",")}function Ke(e){var n={};for(var t in e.$$p)e.$$p.hasOwnProperty(t)&&(n[t]=e[t]);return Object.keys(n).length?n:null}function Ze(e,n){var t=n.data,r=e.$$m.def,o=e.$$m.name;e.$$ignChange=!0,$e(o,r,t,e),e.$$p={},e.$$ignChange=!1,A(u.EVENT_INSTANCE_SAVE,o,e)}function Ge(n){m(ze(n),{format:"json"},function(e){A(u.EVENT_INSTANCE_DELETE,n.$$k,n),A(u.EVENT_INSTANCE_DELETE,n.$$m.name,n),Fe(n)},function(e){Si("Setu.instances ! delete",n,e.message,e.stack)})}function Fe(e){ae(e),Rn(e.$$k)}function Be(e){e.registered||($(u.EVENT_INSTANCE_CREATE,e.model.name,Xe,e),$(u.EVENT_INSTANCE_SAVE,e.model.name,Qe,e),$(u.EVENT_INSTANCE_DELETE,e.model.name,Ye,e),e.registered=!0)}function Je(e){e.registered&&(N(u.EVENT_INSTANCE_CREATE,e.model.name,e),N(u.EVENT_INSTANCE_SAVE,e.model.name,e),N(u.EVENT_INSTANCE_DELETE,e.model.name,e),e.registered=!1)}function Xe(e,n){We(e,n)&&nn(e,n)}function Qe(e,n){var t=We(e,n),r=e.value.contains(n);t&&!r?nn(e,n):!t&&r?tn(e,n):t&&rn(e)}function Ye(e,n){e.value.contains(n)&&tn(e,n)}function We(e,n){if(e.params)for(var t in e.params)if(t in n){if(!en(e.params[t],n[t]))return!1}else if(e.params[key]!==ue(n,key))return!1;return!0}function en(e,n){try{return"string"!=typeof n?eval(e)===n:e===n}catch(e){return!1}}function nn(n,e){n.value.unshift(e),1<n.value.length?rn(n):gn(n,function(e){T(u.EVENT_LIST_RESOURCE_CREATE,n)})}function tn(e,n){e.value.remove(n),rn(e)}function rn(n){gn(n,function(e){A(u.EVENT_LIST_RESOURCE_CHANGE,n.key,n)})}function on(e){e.registered||($(u.EVENT_INSTANCE_CHANGE,e.value.$$k,un,e),$(u.EVENT_INSTANCE_DELETE,e.value.$$k,cn,e),e.registered=!0)}function an(e){e.registered&&(N(u.EVENT_INSTANCE_CHANGE,e.value.$$k,e),N(u.EVENT_INSTANCE_DELETE,e.value.$$k,e),e.registered=!1)}function un(e,n,t){t.key=e.key,A(u.EVENT_DETAIL_RESOURCE_CHANGE,e.key,e,t)}function cn(e){A(u.EVENT_DETAIL_RESOURCE_DELETE,e.key,e)}function fn(e){zi=e,xi={}}function sn(e){if(!e||!e.length)return!1;var r={};return e.every(function(e){var n,t=e.title;return(n=xi[e.key])&&n.value?(r[t]=n.value,!0):r=!1}),r}function ln(t,r,o){if(t&&t.length){var i={};t.forEach(function(e){var n="string"==typeof e?En(r,e):e;Sn(n=An(n),function(e){i[e.title]=e.value,Object.keys(i).length===t.length&&o(i)})})}else o({})}function En(e,n){var t=zi[n];return t?dn(n,t):pn(e,n)}function dn(e,n){return{type:"api",key:e,title:e,api:n}}function pn(e,n){var t={},r=n,o=mn(n=hn(n,e),r);return t.key=vn(o),t.model=U(o[3]),yn(o,t),$n(o,t),t.title=o[2]||Tn(t),t}function hn(e,n){if(e.match(wo))try{e=R(n,e)}catch(e){}return e}function mn(e,n){var t=e.match(go);if(!t||12!==t.length)throw gi("Setu.resources !","invalid resource key",n),new TypeError(pi);return t}function vn(e){return e[3]+(e[5]?":"+e[5]:"")+(e[10]?"|"+e[10]:"")}function yn(e,n){e[10]&&(n.params=_n(e[10]),n.queryparams=e[10].replace(/,/g,"&"))}function _n(e){var n=e.split(","),t={};return n.forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t}function $n(e,n){e[5]?(n.pk=e[5],n.pkType=e[5].match(/,/)?Uo:Io,n.type=ni):n.type=ei}function Tn(e){return ni===e.type?Ui.m2i(e.model.name):Ui.m2l(e.model.name)}function An(e){return xi[e.key]?e=xi[e.key]:xi[e.key]=e,e}function Sn(e,n){switch(e.type){case ei:Nn(e,n);break;case ni:wn(e,n);break;case Wo:bn(e,n)}}function Nn(n,t,e){n.value&&!e?t(kn(n)):ce(n.model,n.queryparams,function(e){n.value=n.value||[],e.forEach(function(e){n.value.push(e)}),Be(n),t(kn(n))},function(e){t({title:n.title,value:e})})}function gn(e,n){for(;e.value.length;)Fe(e.value.pop());Nn(e,n,!0)}function wn(n,t){n.value?t(kn(n)):le(n.model,n.pk,n.pkType,n.queryparams,function(e){n.value=e,on(n),t(kn(n))},function(e){t({title:n.title,value:e})})}function bn(n,t){n.value?t(kn(n)):E(n.api,{format:"json"},function(e){n.value=e.data,t(kn(n))},function(e){t({title:n.title})})}function kn(e){return{title:e.title,value:e.value}}function Rn(e){e in xi&&(Ln(xi[e]),delete xi[e])}function Cn(){for(var e in xi)xi.hasOwnProperty(e)&&Rn(e)}function On(e){if(!(e.$$k in xi)){var n={key:e.$$k,model:e.$$m,pk:Le(e),pkType:1===e.$$m.primaryKeys.length?Io:Uo,title:Ui.m2i(e.$$m.name),type:ni,value:e};on(n),xi[e.$$k]=n}}function Ln(e){ei===e.type?Je(e):ni===e.type&&an(e)}function Dn(e){return Pn(e)||Vn(e)||e.querySelectorAll(yi).length}function Vn(e){return e.outerHTML&&e.outerHTML.match(wo)}function Pn(e){for(var n=0;n<Xo.length;++n)if(e.hasAttribute(Xo[n]))return!0;return!1}function In(e){var n,t=e.getAttribute(Mo);return t?-1!==[ni,ri,oi].indexOf(t)?{type:t}:(n=t.match(Co))?{type:ei,modelName:n[1],filter:n[3]}:(n=t.match(Oo))?{type:ti,modelName:n[1]}:{type:ui,code:t}:null}function Un(e){if(e.hasAttribute(Zo))return{type:ii,model:U(e.getAttribute(Zo))};if(e.hasAttribute(qo)){var n=e.getAttribute(qo),t=En(e.$s.needed,n);if(ni!==t.type)throw gi("Setu.meta !","invalid instance resource key",n,e),new TypeError(pi);return{type:ai,resource:t}}return null}function jn(e){return xn(e,jo)}function Mn(e){return xn(e,Fo)}function xn(e,n){if(!e.hasAttribute(n))return[];for(var t=e.getAttribute(n).split(","),r=0;r<t.length;++r){var o=En(e.$s.needed,t[r]);if(ei!==o.type&&ni!==o.type)throw gi("Setu.meta !","invalid key",n,t[r],e),new TypeError(pi);t[r]=o}return t}function zn(e,n){$_(e).before(n);var t=$_(e).previous().element,r=e.$s.parent;return t.$s=e.$s,Zn(e),r&&(r.$s.children.push(t),t.$s.parent=r),t}function Hn(e,n){e.$s.needed[e.$s.contextKey]=n;var t=e.outerHTML;t.match(wo)?$_(e).before(R(e.$s.needed,t)):$_(e).before(t);var r=$_(e).previous().element;return r.removeAttribute(Ko),nt(e,r),r}function qn(e){var n=e.$s;if(!n)throw gi("Setu.scopes !","internal error while trying to eval binds",e),new Error(hi);$_(e).before(R(n.needed,n.template));var t=$_(e).previous().element;return nt(e,t),$_(e).getClass().split(" ").forEach(function(e){$_(t).addClass(e)}),t}function Kn(e){e.$s=e.$s||{},e.$s.key=Hi,++Hi}function Zn(e){var n=e.$s;Gn(n),Fn(n,e),A(u.EVENT_BEFORE_ELEMENT_DELETE,n.key,e),e.parentNode&&$_(e).remove()}function Gn(e){e.children&&e.children.length&&(e.children.slice().forEach(function(e){Zn(e)}),delete e.children)}function Fn(e,n){e.parent&&(e.parent.$s.children.remove(n),delete e.parent)}function Bn(e){for(e.forEach(function(e){e.$s?Zn(e):e.parentNode&&$_(e).remove()});e.length;)e.pop()}function Jn(e,n){n.$sEvalingParent=!1,n.$s=n.$s||{},n.$s.needed=n.$s.needed||{},tt(e.$s,n.$s),n.$s.contextKey=e.$s.contextKey,n.$s.parent=e}function Xn(e){var n={};return n.parent=e.parentNode,n.index=$_(e).index(),n.data=e.outerHTML,n.$s=e.$s,Zn(e),n}function Qn(e){if(null!==e.parent.parentNode){Yn(e);var n=$_(e.parent).nthChild(e.index).element;return n.$s=e.$s,et(n,Wn(n)),n}Ni("Setu.scopes !","ignoring hidden element under dead parent",e)}function Yn(e){0<e.index?$_(e.parent).nthChild(e.index-1).after(e.data):$_(e.parent).prepend(e.data)}function Wn(e){for(var n=e.parentNode;n&&!n.$s;)n=n.parentNode;return n}function et(e,n){n&&(n.$s.children=n.$s.children||[],n.$s.children.push(e),e.$s.parent=n)}function nt(e,n){var t=n.$s={needed:{}},r=e.$s;for(var o in r)if(r.hasOwnProperty(o))switch(o){case ci:tt(r,t);break;case fi:break;default:t[o]=r[o]}r.parent&&r.parent.$s.children.push(n)}function tt(e,n){for(var t in e.needed)e.needed.hasOwnProperty(t)&&(n.needed[t]=e.needed[t])}function rt(){qi=[],Fi=Gi=0,Bi=Zi=!(Ki=[])}function ot(){Zi||it()||(at(),ut(),ct(),T(u.EVENT_META_RENDER,u),ft())}function it(){return!Ki.length&&(Gi||Fi||ft(),!0)}function at(){Zi=!0,Fi&&--Fi}function ut(){for(var e=Ki.shift();e;)e.$sQueued=!1,lt(e),e=Ki.shift()}function ct(){Zi=!1}function ft(){Bi||(Bi=!0,yr(),T(u.EVENT_PAGE_RENDER,u))}function st(e){var n=new RegExp("[^a-zA-Z0-9_]"+e+"[^a-zA-Z0-9_]",""),t=[],r=[];return qi.forEach(function(e){e.data&&e.data.match(n)?t.push(Qn(e)):r.push(e)}),qi=r,t}function lt(e){if(!Et(e)){var n=dt(e),t=pt(e);li!==(n=ht(e,t,n))&&(Kn(e),Rt(e,t,n),Ct(e))}}function Et(e){return null===e.parentNode||!!e.$sEvalingParent}function dt(e){var n=Array.prototype.slice.call(e.querySelectorAll(yi));return n.forEach(function(e){e.$sEvalingParent=!0}),n}function pt(e){var n=e.$s=e.$s||{};return n.needed=n.needed||{},n}function ht(e,n,t){return li===mt(e)||li===Tt(e,n)||li===Nt(e,n)||li===gt(e,n,t)||li===wt(e,n)||li===bt(e,n)?li:(e.outerHTML.match(wo)&&(t=kt(e,n,t)),t)}function mt(n){return n.hasAttribute(Ho)?(Gi++,E(n.getAttribute(Ho),{},function(e){Gi--,n.hasAttribute(Bo)?n=vt(n,e):(yt(n,e),_t(n))}),li):si}function vt(e,n){return e=zn(e,n.data.match(wo)?R(e.$s.needed,n.data):n.data)}function yt(e,n){e.innerHTML=n.data.match(wo)?R(e.$s.needed,n.data):n.data,e.removeAttribute(Ho)}function _t(e){Dn(e)&&$t(e)}function $t(e){Ki.push(e),e.$sQueued=!0,ot()}function Tt(e,n){if(!e.hasAttribute(Fo)||n.gotRequired)return si;var t,r=Mn(e);return(t=sn(r))?(St(n,t),si):(At(e,n,r),li)}function At(n,t,e){Gi++,ln(e,{},function(e){St(t,e),Gi--,$t(n)})}function St(e,n){for(var t in n)n.hasOwnProperty(t)&&(e.needed[t]=n[t]);e.gotRequired=!0}function Nt(e,n){if(!e.hasAttribute(jo)||n.template)return si;if(e.hasAttribute(Ko)){var t=e.getAttribute(Ko);e.removeAttribute(Ko),n.template=e.outerHTML,e.setAttribute(Ko,t)}else n.template=e.outerHTML;return si}function gt(n,t,e){var r;if(!n.hasAttribute(Ko)||null===(r=n.getAttribute(Ko).match(ko)))return si;var o=r[1],i=r[2];try{i=O(t.needed,i)}catch(e){return gi("Setu.parser !",Ko,r[2],n,t,e.message,e.stack),li}return n.$s.contextKey=o,i.forEach(function(e){Hn(n,e)}),i.length&&Dn($_(n).previous().element)&&(Fi=1),Bn(e),Zn(n),li}function wt(n,e){if(!n.hasAttribute(zo))return si;var t=n.getAttribute(zo),r=!1;try{r=O(e.needed,t)}catch(e){return gi("Setu.parser !",zo,t,n,e.message,e.stack),li}return r?si:(qi.push(Xn(n)),li)}function bt(n,e){var t;if(!n.hasAttribute(xo)||null===(t=n.getAttribute(xo).match(Ro)))return si;var r=t[1],o=t[2];try{o=O(e.needed,o)}catch(e){return gi("Setu.parser !",xo,t[2],n,e.message,e.stack),li}return e.needed[r]=o,si}function kt(e,n,t){k(n.needed),e.innerHTML.match(wo)&&($r(),e.innerHTML=R({},e.innerHTML),Bn(t),_r(),t=Array.prototype.slice.call(e.querySelectorAll(yi)));for(var r=0;r<e.attributes.length;++r){var o=e.attributes[r];o.value.match(wo)&&(o.value=R({},o.value))}return D(Object.keys(n.needed)),t}function Rt(n,e,t){t.forEach(function(e){Jn(n,e),e.$sQueued||(Ki.push(e),e.$sQueued=!0)}),t.length&&(e.children=t)}function Ct(e){e.hasAttribute(Mo)&&Gt(e),"form"===e.tagName.toLowerCase()&&Wt(e),e.hasAttribute(jo)&&Lt(e)}function Ot(){Ji={},Qi=!(Xi=[])}function Lt(e){if(e.$sBind)return!0;var n=Dt(e);Vt(e,n,jn(e)),$(u.EVENT_BEFORE_ELEMENT_DELETE,n.key,It,u),e.$sBind=!0}function Dt(e){var n=e.$s;if(n)return n;gi("Setu.binds","internal programming error with binds",e)}function Vt(o,i,e){e.forEach(function(e){var n=e.key,t=i.key;if(Ji[n]=Ji[n]||{},!Ji[n][t]){var r=0===Object.keys(Ji[n]).length;Ji[n][t]=o,r&&Pt(n,e)}})}function Pt(e,n){ni===n.type?$(u.EVENT_DETAIL_RESOURCE_CHANGE,e,jt,u):ei===n.type&&$(u.EVENT_LIST_RESOURCE_CHANGE,e,zt,u)}function It(e,n){var r=n.$s;jn(n).forEach(function(e){var n=e.key,t=r.key;Ji[n][t]&&(delete Ji[n][t],Ut(n,e))}),N(u.EVENT_BEFORE_ELEMENT_DELETE,r.key,u)}function Ut(e,n){0===Object.keys(Ji[e]).length&&(ni===n.type?N(u.EVENT_DETAIL_RESOURCE_CHANGE,e,u):ei===n.type&&N(u.EVENT_LIST_RESOURCE_CHANGE,e,u))}function jt(e,n,t){if(!qt(jt,e,n,t)){var r=t.key,o=t.field;if(Ji[r]){var i=Mt(r,o);i.length&&Ht(r,i),Kt()}else Kt()}}function Mt(r,o){var e=Object.keys(Ji[r]).slice(),i=[];return e.forEach(function(e){var n=Ji[r][e],t=new RegExp("\\."+o+"[^a-zA-Z0-9_]","g");n.$s.template.match(t)&&i.push(e)}),i}function xt(e,n){var t=n.key,r=Ji[t]?Object.keys(Ji[t]).slice():[];r.length?Ht(t,r):st(n.title||Tn(n))}function zt(e,n){var t=n.key;Ji[t]&&Ht(t,Object.keys(Ji[t]).slice())}function Ht(t,e){e.forEach(function(e){var n=Ji[t][e];qn(n),Zn(n)})}function qt(e,n,t,r){return Qi?(Xi.push([e,n,t,r]),!0):!(Qi=!0)}function Kt(){Qi=!1;var e=Xi.shift();e&&e[0](e[1],e[2],e[3])}function Zt(e){Yi=e}function Gt(e){if(!e.$sClick){var n=In(e);if(null===n)throw gi("Setu.clicks ! invalid setu-click",e.getAttribute(Mo),e),new Error(pi);Ft(n,e),e.$sClick=!0}}function Ft(n,e){switch(n.type){case ni:case ri:case oi:Bt(e,n);break;case ti:case ei:Xt(e,n);break;case"generic":e.onclick=function(e){r(e),eval(n.code)}}}function Bt(e,n){var t=e.$s;if(t){var r=Jt(t,e),o=r.$$m.name;switch(n.type){case ni:case ri:if(Yi[o]&&Yi[o][n.type]){var i=Qt(e,o,n);n.instance=r,Yt(e,n,i)}break;case oi:Yt(e,r,Ge)}}else gi("Setu.clicks ! internal programming error blocked processing setu-click",e)}function Jt(e,n){var t=e.needed[e.contextKey];if(!t)throw gi("Setu.clicks ! setu-click specified on an element for","which no instance context can be found",n),new Error(pi);return t}function Xt(e,n){var t=n.modelName;Yi[t]&&Yi[t][n.type]&&Yt(e,n,Qt(e,t,n))}function Qt(e,n,t){var r=Yi[n][t.type];if("function"!=typeof r)throw gi("Setu.clicks ! not a view function",n,t.type,r),new Error(Ei);return t.passed=e.getAttribute(Go),t.origin=e,r}function Yt(e,n,t){$_(e).onclick(function(e){r(e),t(n)})}function Wt(e){null===e.parentNode||e.$sForm||_(u.EVENT_META_RENDER,er,e)}function er(n){S(u.EVENT_META_RENDER,n),nr(n);var e=Un(n);if(e)switch(e.type){case ii:tr(n,ie(e.model));break;case ai:var t;(t=sn([e.resource]))?tr(n,t[Object.keys(t)[0]]):ln([e.resource],{},function(e){tr(n,e[Object.keys(e)[0]])})}}function nr(e){e.querySelectorAll("select").forEach(function(e){var n=e.querySelector("option[selected]");n&&(e.value=n.value)})}function tr(e,n){e.$si=n,e.onsubmit=rr(e),e.$sForm=!0}function rr(t){return function(){if(t.hasAttribute(Yo))return!1;try{var n=ar(t);return or(t,n)&&(cr(t),lr(t,n),hr(t),Ve(t.$si,function(e){mr(t,n),T(u.EVENT_FORM_SUCCESS,t,e)},function(e){mr(t,n),gi("Setu.forms ! form-submit",t)})),!1}catch(e){return Si("Setu.forms form-submit",e.message,e.stack),!1}}}function or(e,n){return ir(e)&&ur(n)}function ir(e){return-1===y(u.ADAPTER_VALIDATE_FORM,e).indexOf(!1)}function ar(e){return document.querySelectorAll('form[foreign-key="'+e.getAttribute("name")+'"]')}function ur(e){var n;for(n=0;n<e.length;++n)if(!ir(e[n]))return!1;return!0}function cr(e){for(var n=e.elements,t={},r=e.$si.$$m,o=0;o<n.length;++o){var i=n[o],a=i.getAttribute(Wi);a&&a in r.def&&(t[a]=fr(r.name,a,r.def[a],i.value))}$e(r.name,r.def,t,e.$si),y(u.ADAPTER_TUNE_INSTANCE,e,e.$si)}function fr(e,n,t,r){var o=K(e,n,t);switch(o){case No:case So:return sr(t.type,r);case Ao:var i=U(t.fk),a=i.primaryKeys[0];return fr(i.name,a,i.def[a],r);case To:return eval(r)}}function sr(e,n){return-1===ea.indexOf(e)?eval(n):n}function lr(e,n){n.length&&Er(e,n[0].getAttribute(Qo));for(var t=0;t<n.length;++t){var r=n[t];cr(r),pr(r,e)}}function Er(e,n){var t=e.$si.$$m,r=t.def[n];e.$si[n]=dr(t.name,n,r)?[]:o}function dr(e,n,t){var r=K(e,relatedAs,t);if(To!==r)return!1;var o=W(e,relatedAs,t.elements);return Ao==o}function pr(e,n){var t=e.getAttribute(Qo),r=e.$si,o=n.$si;i(o[t])?o[t].push(r):o[t]=r}function hr(e){e.hasAttribute(Jo)&&(e.$si.$$qp=e.getAttribute(Jo))}function mr(e,n){if(e.hasAttribute(Zo)){vr(e);for(var t=0;t<n.length;++t){var r=n[t];r.hasAttribute(Zo)&&vr(r)}}}function vr(e){e.$si=ie(e.$si.$$m)}function yr(){ua.querySelectorAll("a[href]").forEach(function(n){if(n.$sLink)return!0;var e=n.getAttribute("href").replace(/\?.*$/,"");ra[e]&&$_(n).onclick(function(e){return r(e),Dr(n.getAttribute("href")),!1}),n.$sLink=!0})}function _r(){ua&&ua.parentNode&&ta.observe(ua,{childList:!0,subtree:!0})}function $r(){ta.disconnect()}function Tr(e){var r=!1;e.forEach(function(e){if(e.addedNodes&&e.addedNodes.length)for(var n=0;n<e.addedNodes.length;++n){var t=e.addedNodes[n];Zr===t.nodeType&&Dn(t)&&(Ki.push(t),t.$sQueued=!0,r=!0)}}),!Zi&&r&&ot()}function Ar(e){ra=e,Nr()}function Sr(e){gr(),wr()?e():br(ra[ia],e)}function Nr(){oa=ia=o}function gr(){aa&&aa.path?(ia=aa.path.replace(/\?.*$/,""),aa=null):ia=location.pathname}function wr(){return!ra[ia]&&(oa={},!0)}function br(e,n){"function"==typeof e?e(function(e){kr(e,n)}):kr(e,n)}function kr(e,n){oa=e,n()}function Rr(e){window.history.pushState({path:e},"",e)}function Cr(e){window.history.replaceState({path:e},"",e)}function Or(e,n){fa=e,V(n.config||{}),Ar(n.routes||{}),I(n.models,n.modelFilters,n.config&&n.config.models),fn(n.resources||{}),Zt(n.views||{}),Pr()}function Lr(){Hr(),Pr()}function Dr(e){Rr(e),Pr()}function Vr(e){Cr(e),Pr()}function Pr(){Ir(),jr()}function Ir(){var e=P();"resources"in e&&e.resources.forEach(Rn),Nr(),rt(),Ot(),g(),Ur()}function Ur(){if(ca){for(var e=ca.previous();e;){var n=e;e=e.previous(),n.remove()}ca=o}}function jr(){Sr(function(){oa.redirect?Vr(oa.redirect):oa.include?Mr():qr()})}function Mr(){w("queryparams",xr()),oa.flush&&Hr(),ln(oa.require||[],{},function(e){k(e),_r(),zr()})}function xr(){var t={};window.location.search&&window.location.search.replace(/^\?/,"").split("&").forEach(function(e){var n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])});return t}function zr(){E(oa.include,{},function(e){(ca=$_(ua).firstChild())?ca.before(e.data):$_(ua).append(e.data),ua.querySelectorAll(yi).length||ft()})}function Hr(){Cn()}function qr(){_r(),ua.querySelectorAll(yi).forEach(function(e){Ki.push(e),e.$sQueued=!0}),ot()}var Kr="application/json; charset=UTF-8",Zr=1,Gr=8,Fr="GET",Br="POST",Jr="PATCH",Xr="PUT",Qr="DELETE",Yr=["$$p","$$m","$$k","$$c","$$ignChange","$$ctrs","$$qp"],Wr="auto",eo="fk",no="elements",to="null",ro="optional",oo="pk",io="type",ao="boolean",uo="date",co="datetime",fo="decimal",so="integer",lo="string",Eo="time",po="uuid",ho=[eo,to],mo=[ao,uo,co,fo,so,lo,Eo,po],vo=[to,ro,io],yo=[Wr,oo,io],_o=[no,ro,io],$o=[to,io],To="array",Ao="fk",So="pk",No="primitive",go=/^({([a-z][0-9a-zA-Z_]*)})?([A-Za-z][0-9a-zA-Z_]+)(:(([^,:|=]+)|([a-z][0-9a-zA-Z_]*=[^,:|=]+(,[a-z][0-9a-zA-Z_]*=[^,:|]+)*)))?(\|([a-z][0-9a-zA-Z_]*=[^,=]+(,[a-z][0-9a-zA-Z_]*=[^,=]+)*))?$/,wo=/({{[^{}]+}})/g,bo=/^setu\-([a-z])([a-z]+)$/,ko=/([a-zA-Z][a-zA-Z0-9_\.]*)[\s]*in[\s]*([a-zA-Z][a-zA-Z0-9_\.]+)/,Ro=/([a-zA-Z][a-zA-Z0-9_]*)[\s]*=[\s]*(.*)+/,Co=/^list::([A-Za-z][A-Za-z0-9_]+)(\|([a-z][0-9a-zA-Z_]*=[^,=]+(,[a-z][0-9a-zA-Z_]*=[^,=]+)*))?$/,Oo=/^create::([A-Z][A-Za-z0-9_]+)$/,Lo=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,Do=/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])[T ](0\d|1\d|2[0-3]):[0-5]\d(:[0-5]\d)?(\.\d+)?(Z|[+-](0\d|1[0-2]):?[0-5]\d)?$/,Vo=/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/,Po=/^(0\d|1\d|2[0-3]):[0-5]\d(:[0-5]\d)?(\.\d+)?(Z|[+-](0\d|1[0-2]):?[0-5]\d)?$/,Io="one",Uo="multi",jo="setu-bind",Mo="setu-click",xo="setu-declare",zo="setu-if",Ho="setu-include",qo="setu-instance",Ko="setu-loop",Zo="setu-model",Go="setu-pass",Fo="setu-require",Bo="setu-replace",Jo="setu-params",Xo=[jo,Mo,xo,zo,Ho,qo,Ko,Zo,Go,Fo],Qo="related-as",Yo="related-to",Wo="api",ei="list",ni="detail",ti="create",ri="update",oi="delete",ii="model",ai="instance",ui="code",ci="needed",fi="children",si="parseFallThrough",li="parseDone",Ei="Improperly configured Setu application",di="Invalid instance data",pi="Invalid Setu meta syntax",hi="Setu internal error",mi="This browser does not support the Setu framework",vi=[];Xo.forEach(function(e){vi.push("["+e+"]")});var yi=vi.join(",");u.MULTI_PK_TO_URL_KEY_VALUE_PATH="KeyValuePath",u.MULTI_PK_TO_URL_ORDERED_VALUES_PATH="OrderedValuesPath",u.MULTI_PK_TO_URL_ORDERED_SEPERATED_VALUES="OrderedSeparatedValues",u.EVENT_LIST_RESOURCE_CREATE="listResourceCreate",u.EVENT_LIST_RESOURCE_CHANGE="listResourceChange",u.EVENT_DETAIL_RESOURCE_CHANGE="detailResourceChange",u.EVENT_DETAIL_RESOURCE_DELETE="detailResourceDelete",u.EVENT_BEFORE_ELEMENT_DELETE="beforeElementDelete",u.EVENT_INSTANCE_CHANGE="instanceChange",u.EVENT_INSTANCE_CREATE="instanceCreate",u.EVENT_INSTANCE_DELETE="instanceDelete",u.EVENT_INSTANCE_SAVE="instanceSave",u.EVENT_META_RENDER="metaRender",u.EVENT_PAGE_BEGIN="pageBegin",u.EVENT_PAGE_RENDER="pageRender",u.EVENT_FORM_SUCCESS="formSuccess",u.ADAPTER_AJAX_BEFORE_SEND="ajaxBeforeSend",u.ADAPTER_AJAX_ON_RESPONSE="ajaxOnResponse",u.ADAPTER_MODELS_LIST="modelsList",u.ADAPTER_VALIDATE_FORM="validateForm",u.ADAPTER_TUNE_INSTANCE="tuneInstance",Array.prototype.contains=function(e){return-1!==this.indexOf(e)},Array.prototype.remove=function(e,n){var t;-1!==(t=this.indexOf(e))&&this.splice(t,n||1)};var _i={error:1,warn:2,info:3,log:4,debug:5},$i=_i.debug;console.debug=console.debug||t,console.log=console.log||t,console.group=console.group||t,console.groupEnd=console.groupEnd||t,console.time=console.time||t,console.timeEnd=console.timeEnd||t;var Ti=console.time||t,Ai=console.timeEnd||t,Si=console.info||t,Ni=console.warn||t,gi=console.error||t,wi={datetime:e};u.models={},u.models.NameResolutionDefault={m2p:function(e){return e.replace(/^([A-Z])/,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})+"s"},p2m:function(e){return e.replace(/^([a-z])/,function(e){return e.toUpperCase()}).replace(/(-[a-z])/g,function(e){return e.charAt(1).toUpperCase()}).replace(/s$/,"")},m2i:function(e){return e.replace(/^([A-Z])/,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},i2m:function(e){return e.replace(/^([a-z])/,function(e){return e.toUpperCase()}).replace(/(_[a-z])/g,function(e){return e.charAt(1).toUpperCase()})},m2l:function(e){return this.m2i(e)+"s"},l2m:function(e){return this.i2m(e).replace(/s$/,"")}};var bi={};u.adapters={};var ki={},Ri={};ki[u.EVENT_LIST_RESOURCE_CREATE]=[],ki[u.EVENT_FORM_SUCCESS]=[],ki[u.EVENT_PAGE_RENDER]=[],ki[u.EVENT_PAGE_BEGIN]=[],ki[u.EVENT_META_RENDER]=[],Ri[u.EVENT_BEFORE_ELEMENT_DELETE]={},Ri[u.EVENT_DETAIL_RESOURCE_CHANGE]={},Ri[u.EVENT_DETAIL_RESOURCE_DELETE]={},Ri[u.EVENT_INSTANCE_CHANGE]={},Ri[u.EVENT_INSTANCE_CREATE]={},Ri[u.EVENT_INSTANCE_DELETE]={},Ri[u.EVENT_INSTANCE_SAVE]={},Ri[u.EVENT_LIST_RESOURCE_CHANGE]={},u.register=_,u.unregister=S;var Ci=window,Oi={},Li,Di;if(u.set=w,"function"!=typeof Object.create)throw gi("Setu.models ! Object.create not supported"),new Error(mi);var Vi={},Pi,Ii,Ui,ji={},Mi=0,xi,zi;u.get=ln;var Hi=1e4,qi=[],Ki=[],Zi=!1,Gi=0,Fi=0,Bi=!1,Ji={},Xi=[],Qi=!1,Yi;_(u.EVENT_LIST_RESOURCE_CREATE,xt);var Wi="name",ea=[lo,co,uo,Eo,po],na=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!na)throw gi("Setu.observer ! no MutationObserver support in browser"),new Error(mi);var ta=new na(function(e){Tr(e)}),ra,oa,ia,aa;if(!window.history||"function"==typeof!window.history.pushState||"function"==typeof!window.history.popState)throw gi("Setu.history ! no support for browsing history update"),new Error(mi);if(window.history.pushState({path:location.pathname+location.search},"",location.pathname+location.search),window.onpopstate=function(e){e.state&&e.state.path&&(aa=e.state,Pr())},"function"!=typeof document.querySelector)throw gi("Setu.application ! document.querySelector not supported"),new Error(mi);var ua=document.querySelector("[setu-app]"),ca,fa;if(!ua)throw gi("Setu.application","no element with setu-app attribute defined"),new TypeError(Ei);if("function"!=typeof ua.querySelectorAll)throw gi("Setu.application ! HtmlElement.querySelectorAll not supported"),new Error(mi);u.run=Or,u.refresh=Lr,u.open=Dr,u.clear=rt,u.app=ua}(window.Setu=window.Setu||{}),$_.ready(function(){Setu.adapters.Django=[{purpose:Setu.ADAPTER_AJAX_BEFORE_SEND,handler:function(e,n,t,r){if(!/^(GET|HEAD|OPTIONS|TRACE)$/.test(t.method)&&!r.crossDomain){var o=document.cookie.match(new RegExp("csrftoken=([^;]+)"));o&&n.setRequestHeader("X-CSRFToken",o[1])}}}]}),$_.ready(function(){Setu.adapters.DjangoRestFramework=[{purpose:Setu.ADAPTER_MODELS_LIST,handler:function(e,n){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}var r,o=n.data;return"object"!=typeof(r=o)||t(r)?t(o)?{list:o}:void 0:{count:o.count,next:o.next,previous:o.previous,list:o.results}}}]});